<!doctype html>
<html lang="en">

<head>
    <title>Title</title>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <link rel="stylesheet" href="styles.css">
    <script src="app.js" type="module"></script>
    <!-- Bootstrap CSS v5.2.1 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
</head>

<body>
    <header>
        <!-- place navbar here -->
    </header>
    <main>
        <!-- Modal trigger button -->
        <button type="button" class="btn btn-primary btn-lg" data-bs-toggle="modal" data-bs-target="#modalId">
            Launch
        </button>

        <!-- Modal Body -->
        <!-- if you want to close by clicking outside the modal, delete the last endpoint:data-bs-backdrop and data-bs-keyboard -->
        <div class="modal fade" id="modalId" tabindex="-1" role="dialog" aria-labelledby="modalTitleId"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-md" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modalTitleId">
                            New Pet
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body px-4">
                        <form action="" id="addPet" class="needs-validation" novalidate>
                            <div class="form-group">
                                <label for="name">Pet name:</label>
                                <input type="text" id="name" class="form-control" required>
                                <div class="invalid-feedback">
                                    Please insert a name.
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="description">Description:</label>
                                <textarea name="description" id="description" class="form-control" required></textarea>
                                <div class="invalid-feedback">
                                    Please insert a description.
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="imageURL">Image URL:</label>
                                <input type="text" name="imageURL" id="imageURL" class="form-control" required></input>
                                <div class="invalid-feedback">
                                    Please insert a valid URL.
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="birthdate">Birthdate:</label>
                                <input type="date" name="birthdate" id="birthdate" class="form-control"
                                    required></input>
                                <div class="invalid-feedback">
                                    Please insert a birthdate.
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="price">Price:</label>
                                <input type="number" name="price" id="price" class="form-control" required></input>
                                <div class="invalid-feedback">
                                    Please insert a price.
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="petCode">Pet Code:</label>
                                <input type="text" name="petCode" id="petCode" class="form-control" required></input>
                                <div class="invalid-feedback">
                                    Please insert a pet code.
                                </div>
                            </div>
                            <div class="form-group sold-group">
                                <label for="sold">Sold:</label>
                                <input type="checkbox" name="sold" id="sold"></input>
                            </div>
                            <button type="submit" class="btn btn-primary text-right">
                                Add pet
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

    </main>
    <footer>
        <!-- place footer here -->
    </footer>
    <!-- Bootstrap JavaScript Libraries -->
    <!-- Optional: Place to the bottom of scripts -->
    <script>
        // JavaScript for disabling form submissions if there are invalid fields
        (function () {
            'use strict';
            var forms = document.querySelectorAll('.needs-validation');
            Array.prototype.slice.call(forms).forEach(function (form) {

                form.addEventListener('submit', function (event) {
                    // HTML5 validation
                    if (!form.checkValidity()) {
                        event.preventDefault();
                        event.stopPropagation();
                    }

                    //Birthdate validation
                    let birthdayInput = document.getElementById('birthdate');
                    let birthdayInputValue = Date.parse(birthdayInput.value);

                    if (Date.now() - birthdayInputValue < 0) {
                        birthdayInput.setCustomValidity('Needs to be a past date.');
                        const validationMessage = document.querySelector('#birthdate + div');

                        validationMessage.textContent = "Needs to be a past date.";

                    } else {
                        birthdayInput.setCustomValidity('');
                    }

                    //Price validation
                    const priceInput = document.getElementById('price');
                    if (priceInput.value < 0) {
                        priceInput.setCustomValidity('Price needs to be bigger than 0.');
                        const validationMessage = document.querySelector('#price + div');
                        validationMessage.textContent = "Price needs to be bigger than 0.";

                    } else {
                        priceInput.setCustomValidity('');
                    }

                    //Petcode validation
                    const petcodeInput = document.getElementById('petCode');
                    const regEx = /^[a-z]{3}\d{3}$/i;

                    console.log(regEx.test(petcodeInput.value));

                    if (!regEx.test(petcodeInput.value)) {
                        petcodeInput.setCustomValidity('Pet code needs to be 3 letters follow by 3 numbers.');
                        const validationMessage = document.querySelector('#petCode + div');
                        validationMessage.textContent = "Pet code needs to be 3 letters follow by 3 numbers.";

                    } else {
                        petcodeInput.setCustomValidity('');
                    }

                    // Add Bootstrap validation classes
                    form.classList.add('was-validated');
                }, false);
            });
        })();
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
        integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
        crossorigin="anonymous"></script>
</body>

</html>